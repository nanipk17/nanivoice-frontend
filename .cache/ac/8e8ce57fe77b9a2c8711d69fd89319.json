{"id":"bOs9","dependencies":[{"name":"D:\\poc\\react-embedd\\package.json","includedInParent":true,"mtime":1691235896556},{"name":"react","loc":{"line":1,"column":51,"index":51},"parent":"D:\\poc\\react-embedd\\src\\components\\StockQuote.js","resolved":"D:\\poc\\react-embedd\\node_modules\\react\\index.js"},{"name":"axios","loc":{"line":3,"column":18,"index":141},"parent":"D:\\poc\\react-embedd\\src\\components\\StockQuote.js","resolved":"D:\\poc\\react-embedd\\node_modules\\axios\\index.js"},{"name":"js-cookie","loc":{"line":4,"column":20,"index":170},"parent":"D:\\poc\\react-embedd\\src\\components\\StockQuote.js","resolved":"D:\\poc\\react-embedd\\node_modules\\js-cookie\\dist\\js.cookie.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=o(require(\"react\")),t=n(require(\"axios\")),r=n(require(\"js-cookie\"));function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(\"default\"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=o?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function u(e){return i(e)||l(e)||m(e)||c()}function c(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function l(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}function i(e){if(Array.isArray(e))return y(e)}function s(e,t,r,n,a,o,u){try{var c=e[o](u),l=c.value}catch(i){return void r(i)}c.done?t(l):Promise.resolve(l).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function u(e){s(o,n,a,u,c,\"next\",e)}function c(e){s(o,n,a,u,c,\"throw\",e)}u(void 0)})}}function p(e,t){return b(e)||v(e,t)||m(e,t)||d()}function d(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function m(e,t){if(e){if(\"string\"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=r){var n,a,o,u,c=[],l=!0,i=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(s){i=!0,a=s}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(i)throw a}}return c}}function b(e){if(Array.isArray(e))return e}var h=\"https://justvoicebackend-vrtx.vercel.app\",g=\"You are an expert pair programmer helping build an AI bot application with the OpenAI ChatGPT and Whisper APIs. The software is a web application built with NextJS with serverless functions, React functional components using TypeScript.\",x=\"\",w=\"Your responses are always 1 to 2 sentences.\",j=g,k=x,O=w,E=\"\".concat(j,\" \").concat(k,\" \").concat(O),S={role:\"system\",content:E},A=function(){var n=p((0,e.useState)([S]),2),a=n[0],o=n[1],c=p((0,e.useState)(!1),2),l=(c[0],c[1]),i=p((0,e.useState)([]),2),s=i[0],d=i[1],m=function(){var e=f(regeneratorRuntime.mark(function e(r){var n,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return\"21m00Tcm4TlvDq8ikWAM\",\"https://api.elevenlabs.io/v1/text-to-speech\",n={\"Content-Type\":\"application/json\",\"xi-api-key\":\"64f7c0ea93b15d001f8984b645c07075\"},a={text:r,model_id:\"eleven_monolingual_v1\",voice_settings:{stability:0,similarity_boost:0,style:.5,use_speaker_boost:!0}},e.prev=4,e.next=7,t.default.post(\"\".concat(\"https://api.elevenlabs.io/v1/text-to-speech\",\"/\").concat(\"21m00Tcm4TlvDq8ikWAM\"),a,{headers:n,responseType:\"blob\"});case 7:if(200!==(o=e.sent).status){e.next=14;break}return(u=new Audio(URL.createObjectURL(o.data))).play(),e.abrupt(\"return\",{status:200,audio:u});case 14:return e.abrupt(\"return\",{status:405,audio:\"some error\"});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(4),e.abrupt(\"return\",{status:400,audio:e.t0});case 20:case\"end\":return e.stop()}},e,null,[[4,17]])}));return function(t){return e.apply(this,arguments)}}();(0,e.useEffect)(function(){a.length>1&&\"system\"!==a[a.length-1].role&&y(),console.log(\"products are\",s)},[a,s]);var y=function(){var e=f(regeneratorRuntime.mark(function e(){var n,c,i,s,f,p,y,v,b,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=\"chat_memory\",c=r.default.get(n)?JSON.parse(r.default.get(n)):\"\",i={role:\"system\",content:\"this is the summary of conversation i know \"+c},e.prev=3,s={conversationId:\"64c521466d43591c2157116f\",textInput:a[a.length-1].content,newConvo:!1},f=h+\"/api/chatgpt/openai\",e.next=8,t.default.post(f,{input:s,summary:i});case 8:return p=e.sent,e.next=11,p.data;case 11:if(y=e.sent,v=y.result,b=y.summary,!v.content){e.next=22;break}return o(function(e){return[].concat(u(e),[v])}),e.next=18,m(v.content);case 18:r.default.remove(n),r.default.set(n,JSON.stringify(b)),e.next=29;break;case 22:console.log(\"result is\",v),d(v.result),g={role:\"user\",content:null,result:v.result},o(function(e){return[].concat(u(e),[g])}),l(!0),r.default.remove(n),r.default.set(n,JSON.stringify(b));case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(3),console.error(\"Error:\",e.t0);case 34:case\"end\":return e.stop()}},e,null,[[3,31]])}));return function(){return e.apply(this,arguments)}}();return e.default.createElement(\"div\",{className:\"chat-container\"},e.default.createElement(\"div\",{className:\"chat-head\"},e.default.createElement(\"h1\",null,\"Chatbot\")),e.default.createElement(\"div\",{className:\"flex-1 bg-white flex items-center justify-center\"},e.default.createElement(\"div\",{className:\"message-body\"},a.map(function(t,r){return e.default.createElement(e.default.Fragment,null,t.content?e.default.createElement(\"div\",{key:r,className:\"p-2 max-w-[400px] \".concat(\"user\"===t.role?\"bg-blue-200 -ml-2\":\"bg-green-200 self-end\",\" rounded\")},e.default.createElement(\"p\",{className:\"msg-body \".concat(\"user\"===t.role?\"text-blue-800\":\"text-green-800\")},t.content)):e.default.createElement(\"div\",{className:\"flex gap-3 px-5\"},s&&s.map(function(t){return e.default.createElement(\"div\",null,e.default.createElement(\"img\",{src:t.image,className:\"w-[150px]\",alt:t.name}))})))}))),e.default.createElement(\"div\",{className:\"chat-input\"},e.default.createElement(\"input\",{type:\"text\",className:\"chat-input-text\",placeholder:\"Type your message...\"})))},N=A;exports.default=N;"},"sourceMaps":null,"error":null,"hash":"69436b4c823bbe37a46312b410ee3b79","cacheData":{"env":{}}}